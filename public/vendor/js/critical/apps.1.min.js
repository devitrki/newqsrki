$(document).ready(function(){"1"==global.flagChangePassword?showModal("modalChangePasswordMonthly"+global.dom):$.get("application/notification-system/user",function(a){"success"==a.status?null!=a.data&&($("#notif-title").html(a.data.title),$("#notif-content").html(a.data.content),$("#btnReadNotification").attr("onclick","notification.read("+a.data.id+")"),showModal("modalBannerNotification"+global.dom)):console.log(a)},"json"),showTime("#current-time-head"),$(window).keydown(function(a){if(13==a.keyCode)return a.preventDefault(),!1}),$('[data-toggle="tooltip"]').tooltip({trigger:"hover"}),$('[data-toggle-second="tooltip"]').tooltip({trigger:"hover"});var a={height:{content_main:$("#main-content").outerHeight(),navbar:$(".header-navbar").outerHeight(),footer:$(".footer").outerHeight()}},e=$(window).height(),n=e-a.height.navbar-a.height.footer-7;$(".content-wrapper.tabs").height(n),$(".page_tabs").height(n),global.display.content_wrapper_height=n,global.display.content_tabs_height=global.display.content_wrapper_height-74,$(".fit-content-tabs").height(global.display.content_tabs_height),$(window).on("resize",function(){a={height:{content_main:$("#main-content").outerHeight(),navbar:$(".header-navbar").outerHeight(),footer:$(".footer").outerHeight()}},e=$(window).height(),n=e-a.height.navbar-a.height.footer-7,$(".content-wrapper.tabs").height(n),$(".page_tabs").height(n),$(".fit-screen-tabs").height(n-32),$(".fit-content-tabs").height(n-32),global.display.content_wrapper_height=n,global.display.content_tabs_height=global.display.content_wrapper_height-74,$(".fit-content-tabs").height(global.display.content_tabs_height)}),$.ajaxSetup({global:!0,type:"POST",timeout:12e4,headers:{"X-CSRF-TOKEN":global.token},statusCode:{0:function(){loading("stop"),loadingModal("stop")},401:function(){loading("stop"),loadingModal("stop"),messageFailed(global.message.error.failed,global.message.error.abort)},403:function(){loading("stop"),loadingModal("stop"),login.show()},404:function(){loading("stop"),loadingModal("stop"),messageFailed(global.message.error.failed,"URL "+global.message.error.not_found)},419:function(){loading("stop"),loadingModal("stop"),login.show()},422:function(a){loading("stop"),loadingModal("stop"),showErrors($.parseJSON(a.responseText))},500:function(){loading("stop"),loadingModal("stop"),messageFailed(global.message.error.failed,global.message.error.internal_server_error)}}}),notification={read:function(a){var e="application/notification-system/user/read/"+a;$.get(e,function(a){location.reload()},"json")}},login={show:function(){loading("stop"),$("#lpassword").val(""),showModal("modalRelogin"+global.dom)},showChangePassword:function(){loading("stop"),$("#loldpassword").val(""),$("#lnewpassword").val(""),$("#lnewpasswordconfirm").val(""),showModal("modalChangePassword"+global.dom)},showChangeProfile:function(){loading("stop"),showModal("modalChangeProfile"+global.dom)},changePassword:function(){loadingModal("start","Change Password");var a={old_password:$("#loldpassword").val(),new_password:$("#lnewpassword").val(),new_password_confirmation:$("#lnewpasswordconfirm").val()};return $.post("auth/password/change",a,function(a){loadingModal("stop"),"success"==a.status?(hideModal("modalChangePassword"+global.dom),toastr.success(a.message,"Change Password")):message.failed(a.message)},"json"),!1},changePasswordMonthly:function(){loadingModal("start","Change Password Monthly");var a={old_password:$("#moldpassword").val(),new_password:$("#mnewpassword").val(),new_password_confirmation:$("#mnewpasswordconfirm").val()};return $.post("auth/password/monthly/change",a,function(a){loadingModal("stop"),"success"==a.status?(hideModal("modalChangePasswordMonthly"+global.dom),toastr.success(a.message,"Change Password Monthly")):message.failed(a.message)},"json"),!1},changeProfile:function(){loadingModal("start","Save");var a={name:$("#pName").val(),phone:$("#pPhone").val()};return $.post("auth/profile/change",a,function(a){loadingModal("stop"),"success"==a.status?($("#pfullnamename").html($("#pName").val()),hideModal("modalChangeProfile"+global.dom),toastr.success(a.message,"Change Profile")):message.failed(a.message)},"json"),!1},login:function(){loadingModal("start","Relogin");var a=$("#lpassword").val();if(""==a)return loadingModal("stop"),messageInfo(global.message.validation.password),!1;var e={email:global.user.email,password:a};return $.post("relogin",e,function(a){return loadingModal("stop"),"success"!=a.status?($("#lpassword").val(""),messageWarning(global.message.validation.credential),!1):(global.token=a.data.token,$.ajaxSetup({headers:{"X-CSRF-TOKEN":a.data.token}}),hideModal("modalRelogin"+global.dom),toastr.success(global.label.success,"Relogin"),void(0<main_menu.myNewTabOpen.length&&(e=main_menu.myNewTabOpen[0],main_menu.openMenuTabs(e.id,e.menu,e.url))));var e},"json"),!1}},languange={change:function(a,e){var n={user_id:a,languange_id:e};$.post("auth/languange/change",n,function(a){location.reload()},"json")}},main_menu={urlCheck:"auth/check",currentTab:"tab0",myNewTabOpen:[],tabs:[{paneId:"tab0",title:"Home",content:"home",active:!0,closable:!1}],tabsLiContent:[],initMenuTabs:function(){main_menu.updateContentLi(),$("#page_tabs").scrollingTabs({tabs:main_menu.tabs,propPaneId:"paneId",propTitle:"title",propActive:"active",propContent:"content",cssClassLeftArrow:"bx bx-chevrons-left",cssClassRightArrow:"bx bx-chevrons-right",disableScrollArrowsOnFullyScrolled:!0,enableSwiping:!0,tabsLiContent:main_menu.tabsLiContent,forceActiveTab:!0,tabClickHandler:function(){}}).on("ready.scrtabs",function(){""!=main_menu.currentTab&&$('a[href$="'+main_menu.currentTab+'"]').trigger("click")})},openMenuTabs:function(o,t,s){main_menu.myNewTabOpen.push({id:o,menu:t,url:s}),$(".search-input .search-list").hasClass("show")&&$(".search-input-close i").trigger("click"),$(".app-content").hasClass("show-overlay")&&$(".app-content").removeClass("show-overlay"),"xl"!=Unison.fetch.now().name&&$.app.menu.hide(),$.get(main_menu.urlCheck,function(a){if("success"==a.status){for(var e=0;e<main_menu.tabs.length;e++)if(main_menu.tabs[e].paneId==="tab"+o)return $('a[href$="tab'+o+'"]').trigger("click"),!1;for(var n=!1,e=0;e<s.length;e++)"?"==s.charAt(e)&&(n=!0);newTab={paneId:"tab"+o,title:t,content:s=n?s+"&menuid="+o:s+"?menuid="+o,active:!0,closable:!0},main_menu.setTabFalse(),main_menu.tabs.push(newTab),main_menu.tabsLiContent.push(main_menu.generateLi(newTab)),main_menu.currentTab=newTab.paneId,$("#page_tabs").scrollingTabs("refresh")}},"json")},setTabFalse:function(){main_menu.tabs.some(function(a){if(a.active)return!(a.active=!1)})},generateLi:function(a){return'<li role="presentation" class="nav-item"></li>'},updateContentLi:function(){main_menu.tabsLiContent=main_menu.tabs.map(function(a){return main_menu.generateLi(a)})},closeTab:function(a){for(var e=0;e<main_menu.tabs.length;e++)main_menu.tabs[e].paneId===a&&(main_menu.tabs.splice(e,1),main_menu.tabsLiContent.splice(e,1));0<main_menu.tabs.length?a==main_menu.currentTab&&(main_menu.currentTab=main_menu.tabs[main_menu.tabs.length-1].paneId):main_menu.currentTab="",$("#page_tabs").scrollingTabs("refresh")}},main_menu.initMenuTabs()}),$(document).on("click",".menu-toggle, .modern-nav-toggle",function(a){setTimeout(function(){$("#page_tabs").scrollingTabs("refresh")},10)}),$("#btnRelogin").on("click",function(a){login.login()}),$("#btnChangePassword").on("click",function(a){login.changePassword()}),$("#btnChangePasswordMonthly").on("click",function(a){login.changePasswordMonthly()}),$("#btnChangeProfile").on("click",function(a){login.changeProfile()}),$("#btnReloginExit").on("click",function(a){window.location=global.url+"/login"}),$.extend(!0,$.fn.dataTable.defaults,{responsive:!1,autoWidth:!0,scrollX:!0,scrollCollapse:!1,language:{processing:'<div class="square-loading"><div class="semibold"><span class="bx bx-revision icon-spin text-left"></span>&nbsp;'+global.datatable.loadingRecords+"</div></div>",lengthMenu:global.datatable.lengthMenu,zeroRecords:global.datatable.zeroRecords,emptyTable:"",info:global.datatable.info,infoEmpty:global.datatable.infoEmpty,infoFiltered:global.datatable.infoFiltered,infoPostFix:"",search:global.datatable.search,url:"",infoThousands:",",loadingRecords:global.datatable.loadingRecords,paginate:{sFirst:'<i class="bx bx-chevrons-left"></i>',sLast:'<i class="bx bx-chevrons-right"></i>',sNext:'<i class="bx bx-chevron-right"></i>',sPrevious:'<i class="bx bx-chevron-left"></i>'},select:{rows:"%d "+global.datatable.selected}},dom:'rt<"row dbottom" <"col-sm-4 d-none d-sm-block"i> <"col-sm-4 col-sm-4 d-none d-sm-block text-center"l> <"col-12 pl-0 col-sm-4 cendiv"p> >'}),$.fn.dataTable.ext.errMode="none",$(document).on("show.bs.modal",function(){hideErrors()});